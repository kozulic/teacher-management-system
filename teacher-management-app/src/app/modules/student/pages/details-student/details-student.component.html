<ng-container *ngIf="loading">Loading...</ng-container>
<ng-container *ngIf="!loading && student">
  <div class="alert alert-info" role="alert">
    <h4 class="alert-heading">{{student.firstName}} {{student.lastName}} <span class="badge badge-pill badge-light">{{student.email}}</span></h4>
    <hr>
    <p class="mb-0">{{student.globalNote}}</p>
  </div>
  <ng-container *ngIf="!loading" class="first-row">
    <div class="first-row">
    <ng-container *ngIf="!loading && grades.length > 0" class="content-container">
      <div class="row-ver">
      <div class="div-nav">
        <h3>Grades</h3>
        <button type="button" class="btn btn-info" (click)="addGrade()">Add grade</button>
      </div>
      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th style="width: 3%" scope="col">No.</th>
            <th style="width: 82%" scope="col">Subject</th>
            <th style="width: 10%" scope="col">Grade</th>
            <th style="width: 5%" scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let grade of grades; let i=index">
            <th scope="row">{{i+1}}</th>
            <td>{{grade.subject}}</td>
            <td>{{grade.grade}}</td>
            <td><div class="btn-group dropleft">
              <button class="btn btn-info  btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                More
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" (click)="editGrade(grade._id)">Edit</a>
                <a class="dropdown-item" (click)="deleteGrade(grade._id)">Delete</a>
              </div>
            </div></td>
          </tr>
        </tbody>
      </table>
    </div>
    </ng-container>
    <ng-container *ngIf="!loading && absences.length > 0" class="content-container">
      <div class="row-ver">
      <div class="div-nav div-left">
        <h3>Absences</h3>
        <button type="button" class="btn btn-info" (click)="addAbsence()">Add absence</button>
      </div>
      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th style="width: 3%" scope="col">No.</th>
            <th style="width: 82%" scope="col">Reason</th>
            <th style="width: 10%" scope="col">Hours</th>
            <th style="width: 5%" scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let absence of absences; let i=index">
            <th scope="row">{{i+1}}</th>
            <td>{{absence.reason}}</td>
            <td>{{absence.hours}}</td>
            <td><div class="btn-group dropleft">
              <button class="btn btn-info  btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                More
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" (click)="editAbsence(absence._id)">Edit</a>
                <a class="dropdown-item" (click)="deleteAbsence(absence._id)">Delete</a>
              </div>
            </div></td>
          </tr>
        </tbody>
      </table>
    </div>
    </ng-container>
    <ng-container *ngIf="!loading && grades.length === 0">
      <div class="div-nav">
        <h3>No grades yet.</h3>
        <button type="button" class="btn btn-info" (click)="addGrade()">Add grade</button>
      </div>
    </ng-container>
    <ng-container *ngIf="!loading && absences.length === 0">
      <div class="div-nav div-left">
        <h3>No absences yet.</h3>
        <button type="button" class="btn btn-info" (click)="addAbsence()">Add absence</button>
        </div>
    </ng-container>
  </div>
  </ng-container>
  <ng-container *ngIf="!loading" class="second-row">
      <div class="first-row">
    <ng-container *ngIf="!loading && contacts.length > 0" class="content-container">
        <div class="row-ver">
      <div class="div-nav">
        <h3>Contacts</h3>
        <button type="button" class="btn btn-info" (click)="addContact()">Add contact</button>
      </div>
      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th style="width: 3%" scope="col">No.</th>
            <th style="width: 30%" scope="col">Name</th>
            <th style="width: 25%" scope="col">Email</th>
            <th style="width: 27%" scope="col">Phone number</th>
            <th style="width: 10%" scope="col">Relation</th>
            <th style="width: 5%" scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let contact of contacts; let i=index">
            <th scope="row">{{i+1}}</th>
            <td>{{contact.firstName}} {{contact.lastName}}</td>
            <td>{{contact.email}}</td>
            <td>{{contact.phoneNumber}}</td>
            <td>{{contact.relationship}}</td>
            <td><div class="btn-group dropleft">
              <button class="btn btn-info  btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                More
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" (click)="editContact(contact._id)">Edit</a>
                <a class="dropdown-item" (click)="deleteContact(contact._id)">Delete</a>
              </div>
            </div></td>
          </tr>
        </tbody>
      </table>
        </div>
    </ng-container>
    <ng-container *ngIf="!loading && notes.length > 0" class="content-container">
      <div class="row-ver">
      <div class="div-nav">
        <h3>Notes</h3>
        <button type="button" class="btn btn-info" (click)="addNote()">Add note</button>
        </div>
      <table class="table table-bordered table-sm">
        <thead>
          <tr>
            <th style="width: 3%" scope="col">No.</th>
            <th style="width: 52%" scope="col">Text</th>
            <th style="width: 40%" scope="col">Date</th>
            <th style="width: 5%" scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let note of notes; let i=index">
            <th scope="row">{{i+1}}</th>
            <td>{{note.text}}</td>
            <td>{{note.date | date }}</td>
            <td><div class="btn-group dropleft">
              <button class="btn btn-info  btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                More
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" (click)="editNote(note._id)">Edit</a>
                <a class="dropdown-item" (click)="deleteNote(note._id)">Delete</a>
              </div>
            </div></td>
          </tr>
        </tbody>
      </table>
      </div>
    </ng-container>
    <ng-container *ngIf="!loading && contacts.length === 0">
      <div class="div-nav">
        <h3>No contacts yet.</h3>
        <button type="button" class="btn btn-info" (click)="addContact()">Add contact</button>
      </div>
    </ng-container>
    <ng-container *ngIf="!loading && notes.length === 0">
      <div class="div-nav div-left">
        <h3>No notes yet.</h3>
        <button type="button" class="btn btn-info" (click)="addNote()">Add note</button>
      </div>
    </ng-container>
  </div>
  </ng-container>
  
</ng-container>